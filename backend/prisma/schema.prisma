datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

generator client {
  provider = "prisma-client-js"
}

model RFP {
  id           Int      @id @default(autoincrement())
  title        String
  description  String
  structured   String   // JSON stored as string
  totalBudget  Float?
  deliveryDays Int?
  createdAt    DateTime @default(now())

  lineItems    RFPLineItem[]
  proposals    Proposal[]
}

model RFPLineItem {
  id        Int      @id @default(autoincrement())
  name      String
  qty       Int
  specs     String?  // JSON stored as string
  rfpId     Int
  rfp       RFP      @relation(fields: [rfpId], references: [id])
}

model Vendor {
  id          Int       @id @default(autoincrement())
  name        String
  email       String
  phone       String?
  createdAt   DateTime  @default(now())

  proposals   Proposal[]
}

model Proposal {
  id          Int      @id @default(autoincrement())
  vendorId    Int
  rfpId       Int
  price       Float?
  terms       String?
  structured  String?  // JSON stored as string
  createdAt   DateTime @default(now())

  vendor      Vendor   @relation(fields: [vendorId], references: [id])
  rfp         RFP      @relation(fields: [rfpId], references: [id])
}
